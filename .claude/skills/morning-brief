#!/usr/bin/env python3
"""
Morning Briefing Skill for Claude Code

Get your daily briefing: emails, calendar, and tasks.

Usage:
  /morning-brief
  /morning-brief --detailed

Calls the CC agent for personalized morning insights.
"""

import sys
import subprocess


def main():
    """Run morning briefing"""

    print("☀️ Good Morning! Preparing your daily briefing...\n")
    print("=" * 70)

    # Default message
    message = "Give me my morning briefing: unread emails, today's calendar, and priorities"

    # Check for detailed flag
    if "--detailed" in sys.argv:
        message = "Give me a detailed morning briefing with full email summaries, all calendar events, recent files, and actionable tasks"

    # Run the CC agent
    try:
        result = subprocess.run(
            [
                "python", "-m", "agency", "debug", "test", "cc",
                "--message", message
            ],
            cwd="/home/user/agents",
            capture_output=False,
            text=True
        )

        return result.returncode

    except Exception as e:
        print(f"❌ Error running morning briefing: {e}")
        return 1


if __name__ == "__main__":
    sys.exit(main())
